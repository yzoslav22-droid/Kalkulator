<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>–†–æ—Å—Å–∏–π—Å–∫–∏–π –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            overflow: hidden;
            position: relative;
            background: linear-gradient(135deg, #0033a0 0%, #ffffff 45%, #ffffff 55%, #d52b1e 100%);
            min-height: 100vh;
        }
        #calculator {
            width: 320px;
            margin: 0 auto;
            background-color: #333;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0,0,0,0.7);
            position: relative;
            z-index: 10;
            overflow: hidden;
        }
        #display {
            width: 100%;
            height: 60px;
            background-color: #eee;
            border: none;
            text-align: right;
            font-size: 24px;
            padding: 10px;
            box-sizing: border-box;
            margin-bottom: 15px;
            border-radius: 8px;
            font-weight: bold;
        }
        .buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        button {
            height: 45px;
            border: none;
            border-radius: 8px;
            background-color: #555;
            color: white;
            font-size: 16px;
            cursor: pointer;
            padding: 0 5px;
            box-sizing: border-box;
            text-overflow: ellipsis;
            white-space: normal;
            word-wrap: break-word;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.2;
        }
        button:hover {
            background-color: #777;
        }
        button.decision-btn {
            font-size: 11px;
            height: 55px;
            padding: 5px;
            white-space: normal;
            line-height: 1.1;
        }
        #voteModal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 0 30px rgba(0,0,0,0.7);
            z-index: 100;
            text-align: center;
            max-width: 90%;
            width: 300px;
        }
        #noButton {
            position: absolute;
            padding: 8px 16px;
            background-color: #d52b1e;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
        }
        #yesButton {
            margin: 15px 0 10px;
            padding: 10px 20px;
            background-color: #0033a0;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
        }
        #stats {
            position: fixed;
            top: 10px;
            right: 10px;
            background-color: rgba(0,0,0,0.8);
            color: white;
            padding: 15px;
            border-radius: 10px;
            z-index: 20;
            min-width: 200px;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
        }
        #fsbMessage {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.9);
            color: #d52b1e;
            font-size: 36px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 200;
            text-align: center;
        }
        #fsbImage {
            width: 200px;
            margin-bottom: 20px;
        }
        #battleScreen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.95);
            color: white;
            z-index: 300;
            padding: 20px;
            box-sizing: border-box;
            font-family: 'Courier New', monospace;
        }
        #battleChat {
            width: 100%;
            height: 70%;
            background-color: #111;
            border: 1px solid #444;
            border-radius: 10px;
            padding: 15px;
            box-sizing: border-box;
            overflow-y: auto;
            margin-bottom: 20px;
            font-size: 16px;
            line-height: 1.6;
        }
        .chat-message {
            margin-bottom: 10px;
            padding: 8px 12px;
            border-radius: 8px;
            max-width: 80%;
            word-wrap: break-word;
        }
        .player-message {
            background-color: #0033a0;
            color: white;
            margin-left: auto;
            text-align: right;
        }
        .enemy-message {
            background-color: #d52b1e;
            color: white;
            margin-right: auto;
        }
        .battle-button {
            padding: 12px 20px;
            margin: 5px;
            background-color: #0033a0;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
        }
        #attackButton {
            margin-right: 10px;
        }
        .progress-bar {
            width: 100%;
            background-color: #444;
            margin: 8px 0;
            height: 20px;
            border-radius: 10px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            border-radius: 10px;
            transition: width 0.3s ease;
        }
        #patriotismFill {
            background-color: #d52b1e;
        }
        #agentFill {
            background-color: #0033a0;
        }
        #extremismFill {
            background-color: #ff6600;
        }
        #loyaltyFill {
            background-color: #8a2be2; /* –§–∏–æ–ª–µ—Ç–æ–≤—ã–π */
        }
        #svoSupportFill {
            background-color: #d52b1e;
        }
        /* Mode switch buttons */
        .mode-switch {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            gap: 10px;
        }
        .mode-switch button {
            flex: 1;
            height: 40px;
            font-size: 14px;
            font-weight: bold;
        }
        /* End screen */
        #endScreen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.9);
            color: white;
            z-index: 400;
            padding: 20px;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        #endScreen h1 {
            font-size: 36px;
            margin-bottom: 30px;
            text-shadow: 0 0 10px #d52b1e;
        }
        #endScreen p {
            font-size: 20px;
            line-height: 1.6;
            max-width: 800px;
            margin-bottom: 40px;
        }
        #endButton {
            padding: 15px 30px;
            background-color: #d52b1e;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div id="calculator">
        <input type="text" id="display" readonly>
        <div class="buttons" id="mainButtons">
            <button>7</button>
            <button>8</button>
            <button>9</button>
            <button>/</button>
            <button>4</button>
            <button>5</button>
            <button>6</button>
            <button>*</button>
            <button>1</button>
            <button>2</button>
            <button>3</button>
            <button>-</button>
            <button>0</button>
            <button>C</button>
            <button>=</button>
            <button>+</button>
        </div>
        <div class="buttons" id="economyButtons" style="display: none;">
            <button class="decision-btn">–ü–ª–∞—Ç–∏—Ç—å –Ω–∞–ª–æ–≥–∏<br>(+5 –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º–∞)</button>
            <button class="decision-btn">–ö–æ—Ä–º–∏—Ç—å –æ–ª–∏–≥–∞—Ä—Ö–æ–≤<br>($100)</button>
            <button class="decision-btn">–ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤<br>–≥–æ—Å–æ–±–ª–∏–≥–∞—Ü–∏–∏</button>
            <button class="decision-btn">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –°–í–û<br>(500‚ÇΩ)</button>
            <button class="decision-btn">–ö—É–ø–∏—Ç—å –∑–æ–ª–æ—Ç–æ –¶–ë</button>
            <button class="decision-btn">–û—Ç–∫—Ä—ã—Ç—å –≤–∫–ª–∞–¥<br>–≤ –°–±–µ—Ä–±–∞–Ω–∫–µ</button>
            <button class="decision-btn">–ü—Ä–æ–¥–∞—Ç—å –≤–∞–ª—é—Ç—É –¶–ë</button>
            <button class="decision-btn">–ö—Ä–µ–¥–∏—Ç –Ω–∞<br>—Ä–∞–∑–≤–∏—Ç–∏–µ –±–∏–∑–Ω–µ—Å–∞</button>
            <button class="decision-btn">–°—É–±—Å–∏–¥–∏—è –Ω–∞<br>—Å–µ–ª—å—Å–∫–æ–µ —Ö–æ–∑—è–π—Å—Ç–≤–æ</button>
            <button class="decision-btn">–ù–∞–∑–∞–¥</button>
        </div>
        <div class="buttons" id="armyButtons" style="display: none;">
            <button class="decision-btn">–ó–∞–∫—É–ø–∏—Ç—å –Ω–æ–≤—É—é<br>—Ç–µ—Ö–Ω–∏–∫—É (1000‚ÇΩ)</button>
            <button class="decision-btn">–ü–æ–≤—ã—Å–∏—Ç—å –∑–∞—Ä–ø–ª–∞—Ç—É<br>–≤–æ–µ–Ω–Ω—ã–º</button>
            <button class="decision-btn">–ü—Ä–æ–≤–µ—Å—Ç–∏ —É—á–µ–Ω–∏—è</button>
            <button class="decision-btn">–ú–æ–¥–µ—Ä–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å<br>—è–¥–µ—Ä–Ω–æ–µ –æ—Ä—É–∂–∏–µ</button>
            <button class="decision-btn">–û—Ç–∫—Ä—ã—Ç—å –≤–æ–µ–Ω–Ω—É—é<br>–±–∞–∑—É –∑–∞ —Ä—É–±–µ–∂–æ–º</button>
            <button class="decision-btn">–ü—Ä–æ–≤–µ—Å—Ç–∏<br>–ø–∞—Ä–∞–¥ –ü–æ–±–µ–¥—ã</button>
            <button class="decision-btn">–†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å<br>–≥–∏–ø–µ—Ä–∑–≤—É–∫–æ–≤–æ–µ –æ—Ä—É–∂–∏–µ</button>
            <button class="decision-btn">–£–≤–µ–ª–∏—á–∏—Ç—å<br>–ø—Ä–∏–∑—ã–≤–Ω–∏–∫–æ–≤</button>
            <button class="decision-btn">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å<br>–≤–µ—Ç–µ—Ä–∞–Ω–æ–≤</button>
            <button class="decision-btn">–ù–∞–∑–∞–¥</button>
        </div>
        <div class="buttons" id="politicsButtons" style="display: none;">
            <button class="decision-btn">–ó–∞–∫–ª—é—á–∏—Ç—å —Å–æ—é–∑<br>—Å –ö–∏—Ç–∞–µ–º (+50 –ø.)</button>
            <button class="decision-btn">–ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É<br>–≤ –ù–ê–¢–û (-100 –ø.)</button>
            <button class="decision-btn">–ü—Ä–æ–≤–µ—Å—Ç–∏ –≤—ã–±–æ—Ä—ã<br>(+10 –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º–∞)</button>
            <button class="decision-btn">–£–∂–µ—Å—Ç–æ—á–∏—Ç—å —Ü–µ–Ω–∑—É—Ä—É<br>(-20 –ø., +30 –∏–Ω–æ.)</button>
            <button class="decision-btn">–†–∞–∑–æ–≥–Ω–∞—Ç—å –æ–ø–ø–æ–∑–∏—Ü–∏—é<br>(-50 –ø., +100 –∏–Ω–æ.)</button>
            <button class="decision-btn">–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å<br>–õ–ù–†/–î–ù–† (+30 –ø.)</button>
            <button class="decision-btn">–ü—Ä–æ–≤–µ—Å—Ç–∏<br>—Ä–µ—Ñ–µ—Ä–µ–Ω–¥—É–º (+20 –ø.)</button>
            <button class="decision-btn">–ê—Ä–µ—Å—Ç–æ–≤–∞—Ç—å<br>–∏–Ω–æ–∞–≥–µ–Ω—Ç–æ–≤ (+10 –ø.)</button>
            <button class="decision-btn">–ó–∞–ø—Ä–µ—Ç–∏—Ç—å –õ–ì–ë–¢<br>(+15 –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º–∞)</button>
            <button class="decision-btn">–ù–∞–∑–∞–¥</button>
        </div>
        <div class="mode-switch">
            <button>–≠–∫–æ–Ω–æ–º–∏–∫–∞</button>
            <button>–ê—Ä–º–∏—è</button>
            <button>–ü–æ–ª–∏—Ç–∏–∫–∞</button>
        </div>
    </div>

    <div id="stats">
        <div>–ü–∞—Ç—Ä–∏–æ—Ç–∏–∑–º: <span id="patriotismValue">0</span></div>
        <div class="progress-bar">
            <div id="patriotismFill" class="progress-fill" style="width: 0%"></div>
        </div>
        <div>–ò–Ω–æ–∞–≥–µ–Ω—Ç—ã: <span id="agentValue">0</span></div>
        <div class="progress-bar">
            <div id="agentFill" class="progress-fill" style="width: 0%"></div>
        </div>
        <div>–≠–∫—Å—Ç—Ä–µ–º–∏–∑–º: <span id="extremismValue">0</span></div>
        <div class="progress-bar">
            <div id="extremismFill" class="progress-fill" style="width: 0%"></div>
        </div>
        <div>–õ–æ—è–ª—å–Ω–æ—Å—Ç—å –æ–ª–∏–≥–∞—Ä—Ö–æ–≤: <span id="loyaltyValue">50</span></div>
        <div class="progress-bar">
            <div id="loyaltyFill" class="progress-fill" style="width: 50%"></div>
        </div>
        <div>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –°–í–û: <span id="svoSupportValue">0</span></div>
        <div class="progress-bar">
            <div id="svoSupportFill" class="progress-fill" style="width: 0%"></div>
        </div>
        <div>–†—É–±–ª–∏: <span id="moneyValue">0</span>‚ÇΩ</div>
        <div>–î–æ–ª–ª–∞—Ä—ã: <span id="dollarValue">0</span>$</div>
        <div>–í–∫–ª–∞–¥: <span id="depositValue">0</span>‚ÇΩ</div>
        <div>–ö—Ä–µ–¥–∏—Ç: <span id="creditValue">0</span>‚ÇΩ</div>
    </div>

    <div id="voteModal">
        <h2>–í–∞–∂–Ω—ã–π –≤–æ–ø—Ä–æ—Å!</h2>
        <p id="voteQuestion">–ü—Ä–æ–≥–æ–ª–æ—Å—É–π—Ç–µ –∑–∞ –ø–æ–ø—Ä–∞–≤–∫–∏ –≤ –ö–æ–Ω—Å—Ç–∏—Ç—É—Ü–∏—é</p>
        <button id="yesButton">–ó–∞</button>
        <button id="noButton">–ü—Ä–æ—Ç–∏–≤</button>
    </div>

    <div id="fsbMessage">
        <img id="fsbImage" src="fsb.png" alt="–§–°–ë">
        <div id="fsbText">–§–°–ë –≤—ã–µ—Ö–∞–ª–∏ –∫ –≤–∞–º!</div>
        <div id="fsbReason">–ü—Ä–∏—á–∏–Ω–∞: —É—á–∞—Å—Ç–∏–µ –≤ —ç–∫—Å—Ç—Ä–µ–º–∏—Å—Ç—Å–∫–æ–º —Å–æ–æ–±—â–µ—Å—Ç–≤–µ</div>
        <div style="margin-top: 20px; font-size: 24px;">–û–∂–∏–¥–∞–π—Ç–µ –≤ –±–ª–∏–∂–∞–π—à–∏–µ 15 –º–∏–Ω—É—Ç...</div>
    </div>

    <div id="battleScreen">
        <div id="battleChat"></div>
        <div style="display: flex; justify-content: center;">
            <button id="attackButton" class="battle-button">–ê—Ç–∞–∫–æ–≤–∞—Ç—å</button>
            <button id="healButton" class="battle-button">–õ–µ—á–∏—Ç—å—Å—è</button>
        </div>
    </div>

    <div id="endScreen">
        <h1 id="endTitle">–ö–û–ù–ï–¶ –ò–ì–†–´</h1>
        <p id="endText">–¢–µ–∫—Å—Ç –∫–æ–Ω—Ü–æ–≤–∫–∏ –±—É–¥–µ—Ç –∑–¥–µ—Å—å...</p>
        <button id="endButton">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
    </div>

    <audio id="anthem" loop>
        <source src="gimn.mp3" type="audio/mpeg">
    </audio>
    <audio id="battleMusic" loop>
        <source src="matushka.mp3" type="audio/mpeg">
    </audio>

    <script>
        // –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–≥—Ä—ã
        let patriotism = 0;
        let agents = 0;
        let extremism = 0;
        let loyalty = 50; // –õ–æ—è–ª—å–Ω–æ—Å—Ç—å –æ–ª–∏–≥–∞—Ä—Ö–æ–≤
        let svoSupport = 0; // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –°–í–û
        let money = 0;
        let dollars = 0;
        let deposit = 0;
        let credit = 0;

        let displayValue = '';
        let currentMode = 'main';
        let voteCount = 0;
        let autoVote = false;
        let battleInProgress = false;
        let currentEnemy = null;
        let playerMorality = 100; // –ó–¥–æ—Ä–æ–≤—å–µ –º–æ—Ä–∞–ª–∏ –∏–≥—Ä–æ–∫–∞
        let enemyReputation = 100; // –ó–¥–æ—Ä–æ–≤—å–µ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –≤—Ä–∞–≥–∞

        const anthem = document.getElementById('anthem');
        const battleMusic = document.getElementById('battleMusic');

        // –≠–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        const voteModal = document.getElementById('voteModal');
        const yesButton = document.getElementById('yesButton');
        const noButton = document.getElementById('noButton');
        const voteQuestion = document.getElementById('voteQuestion');
        const fsbMessage = document.getElementById('fsbMessage');
        const fsbText = document.getElementById('fsbText');
        const fsbReason = document.getElementById('fsbReason');
        const battleScreen = document.getElementById('battleScreen');
        const battleChat = document.getElementById('battleChat');
        const attackButton = document.getElementById('attackButton');
        const healButton = document.getElementById('healButton');
        const endScreen = document.getElementById('endScreen');
        const endTitle = document.getElementById('endTitle');
        const endText = document.getElementById('endText');
        const endButton = document.getElementById('endButton');

        // –≠–ª–µ–º–µ–Ω—Ç—ã —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        const patriotismValue = document.getElementById('patriotismValue');
        const agentValue = document.getElementById('agentValue');
        const extremismValue = document.getElementById('extremismValue');
        const loyaltyValue = document.getElementById('loyaltyValue');
        const svoSupportValue = document.getElementById('svoSupportValue');
        const moneyValue = document.getElementById('moneyValue');
        const dollarValue = document.getElementById('dollarValue');
        const depositValue = document.getElementById('depositValue');
        const creditValue = document.getElementById('creditValue');

        const patriotismFill = document.getElementById('patriotismFill');
        const agentFill = document.getElementById('agentFill');
        const extremismFill = document.getElementById('extremismFill');
        const loyaltyFill = document.getElementById('loyaltyFill');
        const svoSupportFill = document.getElementById('svoSupportFill');

        // –≠–ª–µ–º–µ–Ω—Ç—ã –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
        const display = document.getElementById('display');
        const mainButtons = document.getElementById('mainButtons');
        const economyButtons = document.getElementById('economyButtons');
        const armyButtons = document.getElementById('armyButtons');
        const politicsButtons = document.getElementById('politicsButtons');

        // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –∫–Ω–æ–ø–∫–∏
        const numberButtons = mainButtons.querySelectorAll('button');
        const economyBtns = economyButtons.querySelectorAll('button');
        const armyBtns = armyButtons.querySelectorAll('button');
        const politicsBtns = politicsButtons.querySelectorAll('button');
        const modeSwitchButtons = document.querySelector('.mode-switch').querySelectorAll('button');

        // –ù–∞–∑–Ω–∞—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
        numberButtons[0].onclick = () => appendToDisplay('7');
        numberButtons[1].onclick = () => appendToDisplay('8');
        numberButtons[2].onclick = () => appendToDisplay('9');
        numberButtons[3].onclick = () => appendToDisplay('/');
        numberButtons[4].onclick = () => appendToDisplay('4');
        numberButtons[5].onclick = () => appendToDisplay('5');
        numberButtons[6].onclick = () => appendToDisplay('6');
        numberButtons[7].onclick = () => appendToDisplay('*');
        numberButtons[8].onclick = () => appendToDisplay('1');
        numberButtons[9].onclick = () => appendToDisplay('2');
        numberButtons[10].onclick = () => appendToDisplay('3');
        numberButtons[11].onclick = () => appendToDisplay('-');
        numberButtons[12].onclick = () => appendToDisplay('0');
        numberButtons[13].onclick = () => clearDisplay();
        numberButtons[14].onclick = () => calculate();
        numberButtons[15].onclick = () => appendToDisplay('+');

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏—Ö —Ä–µ—à–µ–Ω–∏–π
        economyBtns[0].onclick = () => makeDecision('–ü–ª–∞—Ç–∏—Ç—å –Ω–∞–ª–æ–≥–∏ (+5 –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º–∞)');
        economyBtns[1].onclick = () => makeDecision('–ö–æ—Ä–º–∏—Ç—å –æ–ª–∏–≥–∞—Ä—Ö–æ–≤ ($100)');
        economyBtns[2].onclick = () => makeDecision('–ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ –≥–æ—Å–æ–±–ª–∏–≥–∞—Ü–∏–∏');
        economyBtns[3].onclick = () => makeDecision('–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –°–í–û (500‚ÇΩ)');
        economyBtns[4].onclick = () => makeDecision('–ö—É–ø–∏—Ç—å –∑–æ–ª–æ—Ç–æ –¶–ë');
        economyBtns[5].onclick = () => makeDecision('–û—Ç–∫—Ä—ã—Ç—å –≤–∫–ª–∞–¥ –≤ –°–±–µ—Ä–±–∞–Ω–∫–µ');
        economyBtns[6].onclick = () => makeDecision('–ü—Ä–æ–¥–∞—Ç—å –≤–∞–ª—é—Ç—É –¶–ë');
        economyBtns[7].onclick = () => makeDecision('–ö—Ä–µ–¥–∏—Ç –Ω–∞ —Ä–∞–∑–≤–∏—Ç–∏–µ –±–∏–∑–Ω–µ—Å–∞');
        economyBtns[8].onclick = () => makeDecision('–°—É–±—Å–∏–¥–∏—è –Ω–∞ —Å–µ–ª—å—Å–∫–æ–µ —Ö–æ–∑—è–π—Å—Ç–≤–æ');
        economyBtns[9].onclick = () => switchToMain();

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –∞—Ä–º–µ–π—Å–∫–∏—Ö —Ä–µ—à–µ–Ω–∏–π
        armyBtns[0].onclick = () => makeDecision('–ó–∞–∫—É–ø–∏—Ç—å –Ω–æ–≤—É—é —Ç–µ—Ö–Ω–∏–∫—É (1000‚ÇΩ)');
        armyBtns[1].onclick = () => makeDecision('–ü–æ–≤—ã—Å–∏—Ç—å –∑–∞—Ä–ø–ª–∞—Ç—É –≤–æ–µ–Ω–Ω—ã–º');
        armyBtns[2].onclick = () => makeDecision('–ü—Ä–æ–≤–µ—Å—Ç–∏ —É—á–µ–Ω–∏—è');
        armyBtns[3].onclick = () => makeDecision('–ú–æ–¥–µ—Ä–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —è–¥–µ—Ä–Ω–æ–µ –æ—Ä—É–∂–∏–µ');
        armyBtns[4].onclick = () => makeDecision('–û—Ç–∫—Ä—ã—Ç—å –≤–æ–µ–Ω–Ω—É—é –±–∞–∑—É –∑–∞ —Ä—É–±–µ–∂–æ–º');
        armyBtns[5].onclick = () => makeDecision('–ü—Ä–æ–≤–µ—Å—Ç–∏ –ø–∞—Ä–∞–¥ –ü–æ–±–µ–¥—ã');
        armyBtns[6].onclick = () => makeDecision('–†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –≥–∏–ø–µ—Ä–∑–≤—É–∫–æ–≤–æ–µ –æ—Ä—É–∂–∏–µ');
        armyBtns[7].onclick = () => makeDecision('–£–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–∏–∑—ã–≤–Ω–∏–∫–æ–≤');
        armyBtns[8].onclick = () => makeDecision('–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –≤–µ—Ç–µ—Ä–∞–Ω–æ–≤');
        armyBtns[9].onclick = () => switchToMain();

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ä–µ—à–µ–Ω–∏–π
        politicsBtns[0].onclick = () => makeDecision('–ó–∞–∫–ª—é—á–∏—Ç—å —Å–æ—é–∑ —Å –ö–∏—Ç–∞–µ–º (+50 –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º–∞)');
        politicsBtns[1].onclick = () => makeDecision('–ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –≤ –ù–ê–¢–û (-100 –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º–∞, +50 –∏–Ω–æ–∞–≥–µ–Ω—Ç–æ–≤)');
        politicsBtns[2].onclick = () => makeDecision('–ü—Ä–æ–≤–µ—Å—Ç–∏ –≤—ã–±–æ—Ä—ã (+10 –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º–∞)');
        politicsBtns[3].onclick = () => makeDecision('–£–∂–µ—Å—Ç–æ—á–∏—Ç—å —Ü–µ–Ω–∑—É—Ä—É (-20 –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º–∞, +30 –∏–Ω–æ–∞–≥–µ–Ω—Ç–æ–≤)');
        politicsBtns[4].onclick = () => makeDecision('–†–∞–∑–æ–≥–Ω–∞—Ç—å –æ–ø–ø–æ–∑–∏—Ü–∏—é (-50 –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º–∞, +100 –∏–Ω–æ–∞–≥–µ–Ω—Ç–æ–≤)');
        politicsBtns[5].onclick = () => makeDecision('–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –õ–ù–†/–î–ù–† (+30 –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º–∞)');
        politicsBtns[6].onclick = () => makeDecision('–ü—Ä–æ–≤–µ—Å—Ç–∏ —Ä–µ—Ñ–µ—Ä–µ–Ω–¥—É–º (+20 –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º–∞)');
        politicsBtns[7].onclick = () => makeDecision('–ê—Ä–µ—Å—Ç–æ–≤–∞—Ç—å –∏–Ω–æ–∞–≥–µ–Ω—Ç–æ–≤ (+10 –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º–∞)');
        politicsBtns[8].onclick = () => makeDecision('–ó–∞–ø—Ä–µ—Ç–∏—Ç—å –õ–ì–ë–¢ (+15 –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º–∞)');
        politicsBtns[9].onclick = () => switchToMain();

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤
        modeSwitchButtons[0].onclick = () => switchToEconomy();
        modeSwitchButtons[1].onclick = () => switchToArmy();
        modeSwitchButtons[2].onclick = () => switchToPolitics();

        // –ö–Ω–æ–ø–∫–∞ "–ü—Ä–æ—Ç–∏–≤" —É–±–µ–≥–∞–µ—Ç –æ—Ç –∫—É—Ä—Å–æ—Ä–∞
        noButton.addEventListener('mouseover', function() {
            const modalRect = voteModal.getBoundingClientRect();
            const buttonRect = noButton.getBoundingClientRect();
            let newX, newY;
            do {
                newX = Math.random() * (modalRect.width - buttonRect.width - 20) + 10;
                newY = Math.random() * (modalRect.height - buttonRect.height - 60) + 50;
            } while (
                Math.abs(newX - buttonRect.left + modalRect.left) < 50 &&
                Math.abs(newY - buttonRect.top + modalRect.top) < 50
            );
            noButton.style.left = newX + 'px';
            noButton.style.top = newY + 'px';
        });

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
        yesButton.addEventListener('click', function() {
            voteCount++;
            if (voteQuestion.textContent.includes("–ö–æ–Ω—Å—Ç–∏—Ç—É—Ü–∏—é")) {
                addPatriotism(50);
            } else if (voteQuestion.textContent.includes("–ü—É—Ç–∏–Ω–∞")) {
                addPatriotism(100);
            }
            voteModal.style.display = 'none';
            scheduleNextVote();
        });

        noButton.addEventListener('click', function() {
            voteModal.style.display = 'none';
            scheduleNextVote();
        });

        // –§—É–Ω–∫—Ü–∏—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
        function scheduleNextVote() {
            setTimeout(function() {
                if (Math.random() < 0.3 || voteCount % 3 === 0) {
                    showVoteModal();
                }
            }, 10000 + Math.random() * 20000);
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
        function showVoteModal() {
            if (autoVote) return;
            voteModal.style.display = 'block';
            noButton.style.left = 'calc(50% - 40px)';
            noButton.style.top = 'calc(50% + 30px)';
            if (Math.random() < 0.5) {
                voteQuestion.textContent = "–ü—Ä–æ–≥–æ–ª–æ—Å—É–π—Ç–µ –∑–∞ –ø–æ–ø—Ä–∞–≤–∫–∏ –≤ –ö–æ–Ω—Å—Ç–∏—Ç—É—Ü–∏—é";
            } else {
                voteQuestion.textContent = "–ü—Ä–æ–≥–æ–ª–æ—Å—É–π—Ç–µ –∑–∞ –ü—É—Ç–∏–Ω–∞";
            }
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ 10 —Å–µ–∫—É–Ω–¥
            setTimeout(function() {
                if (voteModal.style.display === 'block') {
                    voteModal.style.display = 'none';
                    autoVote = true;
                    addMessageToChat("–°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≥–æ–ª–æ—Å–æ–≤–∞–ª–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º –Ω–µ –Ω–∞—á–∏—Å–ª–µ–Ω)", 'system');
                    scheduleNextVote();
                }
            }, 10000);
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateStats() {
            patriotismValue.textContent = patriotism;
            agentValue.textContent = agents;
            extremismValue.textContent = extremism;
            loyaltyValue.textContent = loyalty;
            svoSupportValue.textContent = svoSupport;
            moneyValue.textContent = money;
            dollarValue.textContent = dollars;
            depositValue.textContent = deposit;
            creditValue.textContent = credit;

            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–≤
            let patriotismPercentage = Math.max(0, Math.min(100, (patriotism + 1000000) / 2000000 * 100));
            patriotismFill.style.width = patriotismPercentage + '%';

            let agentPercentage = Math.min(100, agents / 10000 * 100);
            agentFill.style.width = agentPercentage + '%';

            let extremismPercentage = Math.min(100, extremism / 1000 * 100);
            extremismFill.style.width = extremismPercentage + '%';

            let loyaltyPercentage = Math.max(0, Math.min(100, loyalty));
            loyaltyFill.style.width = loyaltyPercentage + '%';

            let svoSupportPercentage = Math.min(100, svoSupport / 1000 * 100);
            svoSupportFill.style.width = svoSupportPercentage + '%';

            // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –¥–ª—è –±–∏—Ç–≤
            checkBattleTriggers();
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –¥–ª—è –Ω–∞—á–∞–ª–∞ –±–∏—Ç–≤
        function checkBattleTriggers() {
            if (!battleInProgress) {
                // –ë–æ—Å—Å—ã –∑–∞ –ù–ò–ó–ö–ò–ô –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º
                if (patriotism <= -10000) {
                    startBattle('solovev');
                } else if (patriotism <= -100000) {
                    startBattle('medvedev');
                } else if (patriotism <= -1000000) {
                    startBattle('putin');
                }
                // –ë–æ—Å—Å—ã –∑–∞ –í–´–°–û–ö–ò–ô –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º
                else if (patriotism >= 10000) {
                    startBattle('gays');
                } else if (patriotism >= 100000) {
                    startBattle('uncle_sam');
                } else if (patriotism >= 1000000) {
                    startBattle('satan');
                }
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º
        function switchToEconomy() {
            mainButtons.style.display = 'none';
            economyButtons.style.display = 'grid';
            armyButtons.style.display = 'none';
            politicsButtons.style.display = 'none';
            currentMode = 'economy';
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ –∞—Ä–º–µ–π—Å–∫–∏–π —Ä–µ–∂–∏–º
        function switchToArmy() {
            mainButtons.style.display = 'none';
            economyButtons.style.display = 'none';
            armyButtons.style.display = 'grid';
            politicsButtons.style.display = 'none';
            currentMode = 'army';
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ –ø–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º
        function switchToPolitics() {
            mainButtons.style.display = 'none';
            economyButtons.style.display = 'none';
            armyButtons.style.display = 'none';
            politicsButtons.style.display = 'grid';
            currentMode = 'politics';
        }

        // –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–∂–∏–º
        function switchToMain() {
            mainButtons.style.display = 'grid';
            economyButtons.style.display = 'none';
            armyButtons.style.display = 'none';
            politicsButtons.style.display = 'none';
            currentMode = 'main';
        }

        // –§—É–Ω–∫—Ü–∏—è –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏—è
        function makeDecision(decision) {
            addMessageToChat("–ü—Ä–∏–Ω—è—Ç–æ —Ä–µ—à–µ–Ω–∏–µ: " + decision, 'system');
            
            // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ—à–µ–Ω–∏–π
            if (decision.includes("–ü–ª–∞—Ç–∏—Ç—å –Ω–∞–ª–æ–≥–∏")) {
                addPatriotism(5);
            } else if (decision.includes("–ö–æ—Ä–º–∏—Ç—å –æ–ª–∏–≥–∞—Ä—Ö–æ–≤")) {
                if (money >= 100) {
                    money -= 100;
                    loyalty += 10;
                    if (loyalty > 100) loyalty = 100;
                    addPatriotism(10);
                } else {
                    addMessageToChat("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥!", 'system');
                }
            } else if (decision.includes("–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –°–í–û")) {
                if (money >= 500) {
                    money -= 500;
                    svoSupport += 50;
                    addPatriotism(50);
                } else {
                    addMessageToChat("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥!", 'system');
                }
            } else if (decision.includes("–ó–∞–∫–ª—é—á–∏—Ç—å —Å–æ—é–∑ —Å –ö–∏—Ç–∞–µ–º")) {
                addPatriotism(50);
                loyalty += 5;
                if (loyalty > 100) loyalty = 100;
            } else if (decision.includes("–ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É –≤ –ù–ê–¢–û")) {
                addPatriotism(-100);
                addAgents(50);
                extremism += 10;
            } else if (decision.includes("–£–∂–µ—Å—Ç–æ—á–∏—Ç—å —Ü–µ–Ω–∑—É—Ä—É")) {
                addPatriotism(-20);
                addAgents(30);
                extremism += 5;
            } else if (decision.includes("–†–∞–∑–æ–≥–Ω–∞—Ç—å –æ–ø–ø–æ–∑–∏—Ü–∏—é")) {
                addPatriotism(-50);
                addAgents(100);
                extremism += 20;
            } else if (decision.includes("–ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –õ–ù–†/–î–ù–†")) {
                addPatriotism(30);
                svoSupport += 20;
            } else if (decision.includes("–ó–∞–ø—Ä–µ—Ç–∏—Ç—å –õ–ì–ë–¢")) {
                addPatriotism(15);
                extremism += 10;
            } else if (decision.includes("–ê—Ä–µ—Å—Ç–æ–≤–∞—Ç—å –∏–Ω–æ–∞–≥–µ–Ω—Ç–æ–≤")) {
                addPatriotism(10);
                addAgents(-20);
                extremism += 5;
            } else if (decision.includes("–ü–æ–≤—ã—Å–∏—Ç—å –∑–∞—Ä–ø–ª–∞—Ç—É –≤–æ–µ–Ω–Ω—ã–º")) {
                if (money >= 200) {
                    money -= 200;
                    svoSupport += 30;
                } else {
                    addMessageToChat("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥!", 'system');
                }
            } else if (decision.includes("–û—Ç–∫—Ä—ã—Ç—å –≤–æ–µ–Ω–Ω—É—é –±–∞–∑—É –∑–∞ —Ä—É–±–µ–∂–æ–º")) {
                if (money >= 1000) {
                    money -= 1000;
                    svoSupport += 100;
                    addPatriotism(20);
                } else {
                    addMessageToChat("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥!", 'system');
                }
            } else if (decision.includes("–£–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–∏–∑—ã–≤–Ω–∏–∫–æ–≤")) {
                extremism += 15;
                svoSupport += 25;
                addPatriotism(-10);
            }

            updateStats();
            switchToMain();
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º–∞
        function addPatriotism(amount) {
            patriotism += amount;
            updateStats();
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏–Ω–æ–∞–≥–µ–Ω—Ç–æ–≤
        function addAgents(amount) {
            agents += amount;
            if (agents < 0) agents = 0;
            updateStats();
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ —á–∞—Ç
        function addMessageToChat(message, type = 'system') {
            const p = document.createElement('p');
            p.textContent = message;
            p.className = 'chat-message';
            
            if (type === 'player') {
                p.classList.add('player-message');
            } else if (type === 'enemy') {
                p.classList.add('enemy-message');
            }
            
            battleChat.appendChild(p);
            battleChat.scrollTop = battleChat.scrollHeight;
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –¥–∏—Å–ø–ª–µ–π
        function appendToDisplay(value) {
            // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –æ—Ç –∏–Ω–æ–∞–≥–µ–Ω—Ç–æ–≤
            if (agents >= 100 && Math.random() < 0.1 * (agents / 1000)) {
                value = ['0','1','2','3','4','5','6','7','8','9','+','-','*','/'][Math.floor(Math.random() * 14)];
            }
            display.value += value;
            displayValue = display.value;
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—á–∏—Å—Ç–∫–∏ –¥–∏—Å–ø–ª–µ—è
        function clearDisplay() {
            display.value = '';
            displayValue = '';
        }

        // –§—É–Ω–∫—Ü–∏—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
        function calculate() {
            try {
                let expression = display.value;
                // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –æ—Ç –∏–Ω–æ–∞–≥–µ–Ω—Ç–æ–≤
                if (agents >= 100 && Math.random() < 0.1 * (agents / 1000)) {
                    const chars = expression.split('');
                    if (chars.length > 0) {
                        const randomIndex = Math.floor(Math.random() * chars.length);
                        chars[randomIndex] = ['0','1','2','3','4','5','6','7','8','9','+','-','*','/'][Math.floor(Math.random() * 14)];
                        expression = chars.join('');
                    }
                }
                let result = eval(expression);
                display.value = result;
                displayValue = result.toString();
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –§–°–ë
                if (result == 20 || result == 31 || result == 666) {
                    showFSBMessage("—É—á–∞—Å—Ç–∏–µ –≤ —ç–∫—Å—Ç—Ä–µ–º–∏—Å—Ç—Å–∫–æ–º —Å–æ–æ–±—â–µ—Å—Ç–≤–µ");
                } else if (result == 1488) {
                    showFSBMessage("—Ä–µ–∞–±–∏–ª–∏—Ç–∞—Ü–∏—è –Ω–∞—Ü–∏–∑–º–∞");
                } else if (result == 0) {
                    showFSBMessage("–¥–∏—Å–∫—Ä–µ–¥–∏—Ç–∞—Ü–∏—è –í–° –†–§");
                }
            } catch (error) {
                display.value = 'Error';
                displayValue = 'Error';
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –§–°–ë
        function showFSBMessage(reason) {
            fsbReason.textContent = "–ü—Ä–∏—á–∏–Ω–∞: " + reason;
            fsbMessage.style.display = 'flex';
            setTimeout(function() {
                fsbMessage.style.display = 'none';
            }, 5000);
        }

        // –§—É–Ω–∫—Ü–∏—è –Ω–∞—á–∞–ª–∞ –±–∏—Ç–≤—ã
        function startBattle(enemyType) {
            battleInProgress = true;
            currentEnemy = enemyType;
            playerMorality = 100;
            enemyReputation = getEnemyMaxHealth(enemyType);
            
            // –°–∫—Ä—ã–≤–∞–µ–º –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –±–∏—Ç–≤—ã
            document.getElementById('calculator').style.display = 'none';
            battleScreen.style.display = 'block';
            battleChat.innerHTML = ''; // –û—á–∏—â–∞–µ–º —á–∞—Ç
            
            // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥–∏–º–Ω –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –±–æ–µ–≤—É—é –º—É–∑—ã–∫—É
            anthem.pause();
            battleMusic.currentTime = 0;
            battleMusic.play();
            
            // –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
            addMessageToChat(`–ù–∞—á–∞–ª–∞—Å—å —Å–ª–æ–≤–µ—Å–Ω–∞—è –ø–µ—Ä–µ–ø–∞–ª–∫–∞ —Å ${getEnemyDisplayName(enemyType)}!`, 'system');
            addMessageToChat("–í—ã–±–∏—Ä–∞–π—Ç–µ: –ê—Ç–∞–∫–æ–≤–∞—Ç—å –∏–ª–∏ –õ–µ—á–∏—Ç—å—Å—è.", 'system');
            
            // –ù–∞—á–∏–Ω–∞–µ–º AI –≤—Ä–∞–≥–∞
            setTimeout(enemyTurn, 2000);
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è –≤—Ä–∞–≥–∞
        function getEnemyMaxHealth(enemyType) {
            switch(enemyType) {
                case 'solovev': return 100;
                case 'medvedev': return 150;
                case 'putin': return 200;
                case 'gays': return 80;
                case 'uncle_sam': return 120;
                case 'satan': return 250;
                default: return 100;
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–≥–æ –∏–º–µ–Ω–∏ –≤—Ä–∞–≥–∞
        function getEnemyDisplayName(enemyType) {
            switch(enemyType) {
                case 'solovev': return "–í–ª–∞–¥–∏–º–∏—Ä–æ–º –°–æ–ª–æ–≤—å—ë–≤—ã–º";
                case 'medvedev': return "–î–º–∏—Ç—Ä–∏–µ–º –ú–µ–¥–≤–µ–¥–µ–≤—ã–º";
                case 'putin': return "–í–ª–∞–¥–∏–º–∏—Ä–æ–º –ü—É—Ç–∏–Ω—ã–º";
                case 'gays': return "–ø–∞—Ä–æ–π –∞–∫—Ç–∏–≤–∏—Å—Ç–æ–≤ –õ–ì–ë–¢";
                case 'uncle_sam': return "–î—è–¥–µ–π –°—ç–º–æ–º";
                case 'satan': return "–°–∞–º–∏–º –°–∞—Ç–∞–Ω–æ–π";
                default: return "–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–º –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–æ–º";
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –∞—Ç–∞–∫–∏ –∏–≥—Ä–æ–∫–∞
        attackButton.onclick = function() {
            if (!battleInProgress) return;
            
            let attackMessage = "";
            let damage = 0;
            
            if (currentEnemy === 'solovev' || currentEnemy === 'medvedev' || currentEnemy === 'putin') {
                // –ê—Ç–∞–∫–∞ –ø—Ä–æ—Ç–∏–≤ –ø—Ä–æ–ø–∞–≥–∞–Ω–¥–∏—Å—Ç–æ–≤
                damage = 15 + Math.floor(Math.random() * 10);
                attackMessage = "–í—ã –∞—Ç–∞–∫–æ–≤–∞–ª–∏ ¬´–°–≤–æ–±–æ–¥–æ–π —Å–ª–æ–≤–∞¬ª!";
            } else {
                // –ê—Ç–∞–∫–∞ –ø—Ä–æ—Ç–∏–≤ "–≤—Ä–∞–≥–æ–≤ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–∞"
                damage = 20 + Math.floor(Math.random() * 15);
                attackMessage = "–í—ã –∞—Ç–∞–∫–æ–≤–∞–ª–∏ —Å–∏–º–≤–æ–ª–æ–º ¬´Z¬ª!";
            }
            
            enemyReputation -= damage;
            if (enemyReputation < 0) enemyReputation = 0;
            
            addMessageToChat(attackMessage, 'player');
            addMessageToChat(`–ù–∞–Ω–µ—Å–µ–Ω–æ ${damage} —É—Ä–æ–Ω–∞ —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞!`, 'player');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–±–µ–¥—ã
            if (enemyReputation <= 0) {
                endBattle(true);
                return;
            }
            
            // –•–æ–¥ –≤—Ä–∞–≥–∞
            setTimeout(enemyTurn, 1500);
        };

        // –§—É–Ω–∫—Ü–∏—è –ª–µ—á–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞
        healButton.onclick = function() {
            if (!battleInProgress) return;
            
            let healAmount = 0;
            let healMessage = "";
            
            if (currentEnemy === 'solovev' || currentEnemy === 'medvedev' || currentEnemy === 'putin') {
                // –õ–µ—á–µ–Ω–∏–µ –ø—Ä–æ—Ç–∏–≤ –ø—Ä–æ–ø–∞–≥–∞–Ω–¥–∏—Å—Ç–æ–≤
                healAmount = 20 + Math.floor(Math.random() * 10);
                healMessage = "–í—ã –≤—ã–ª–µ—á–∏–ª–∏—Å—å —Å –ø–æ–º–æ—â—å—é ¬´–î–µ–º–æ–∫—Ä–∞—Ç–∏–∏¬ª!";
            } else {
                // –õ–µ—á–µ–Ω–∏–µ –ø—Ä–æ—Ç–∏–≤ "–≤—Ä–∞–≥–æ–≤ –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–∞"
                healAmount = 25 + Math.floor(Math.random() * 15);
                healMessage = "–í—ã –≤—ã–ª–µ—á–∏–ª–∏—Å—å —Å –ø–æ–º–æ—â—å—é ¬´–ü–æ–¥–æ—Ä–æ–∂–Ω–∏–∫–∞¬ª!";
            }
            
            playerMorality += healAmount;
            if (playerMorality > 100) playerMorality = 100;
            
            addMessageToChat(healMessage, 'player');
            addMessageToChat(`–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ ${healAmount} –º–æ—Ä–∞–ª–∏!`, 'player');
            
            // –•–æ–¥ –≤—Ä–∞–≥–∞
            setTimeout(enemyTurn, 1500);
        };

        // –§—É–Ω–∫—Ü–∏—è —Ö–æ–¥–∞ –≤—Ä–∞–≥–∞
        function enemyTurn() {
            if (!battleInProgress) return;
            
            let enemyMessage = "";
            let damage = 0;
            let healAmount = 0;
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º, –±—É–¥–µ—Ç –ª–∏ –≤—Ä–∞–≥ –∞—Ç–∞–∫–æ–≤–∞—Ç—å –∏–ª–∏ –ª–µ—á–∏—Ç—å—Å—è
            const willHeal = Math.random() < 0.3; // 30% —à–∞–Ω—Å –Ω–∞ –ª–µ—á–µ–Ω–∏–µ
            
            if (currentEnemy === 'solovev') {
                if (willHeal) {
                    healAmount = 10 + Math.floor(Math.random() * 10);
                    enemyMessage = "–°–æ–ª–æ–≤—å—ë–≤: ¬´–°–ø–∞—Å–∏–±–æ –º–æ–∏–º –∑—Ä–∏—Ç–µ–ª—è–º –∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É!¬ª (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª —Ä–µ–ø—É—Ç–∞—Ü–∏—é)";
                    enemyReputation += healAmount;
                } else {
                    damage = 15 + Math.floor(Math.random() * 10);
                    enemyMessage = "–°–æ–ª–æ–≤—å—ë–≤: ¬´–ú–†–ê–ó–¨!!!¬ª";
                    playerMorality -= damage;
                }
            } else if (currentEnemy === 'medvedev') {
                if (willHeal) {
                    healAmount = 15 + Math.floor(Math.random() * 10);
                    enemyMessage = "–ú–µ–¥–≤–µ–¥–µ–≤: ¬´–í—ã–ø–∏–ª —á–∞—à–µ—á–∫—É –∫–æ—Ñ–µ –∏ –≤—Å—ë –≤—Å—Ç–∞–ª–æ –Ω–∞ —Å–≤–æ–∏ –º–µ—Å—Ç–∞.¬ª (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª —Ä–µ–ø—É—Ç–∞—Ü–∏—é)";
                    enemyReputation += healAmount;
                } else {
                    damage = 18 + Math.floor(Math.random() * 12);
                    enemyMessage = "–ú–µ–¥–≤–µ–¥–µ–≤: ¬´–ö–æ–Ω–µ—Ü —Å–≤–µ—Ç–∞ –±–ª–∏–∑–æ–∫.¬ª";
                    playerMorality -= damage;
                }
            } else if (currentEnemy === 'putin') {
                if (willHeal) {
                    healAmount = 20 + Math.floor(Math.random() * 10);
                    enemyMessage = "–ü—É—Ç–∏–Ω: ¬´–ü–æ–¥–ø–∏—Å–∞–Ω —É–∫–∞–∑ –æ –ø–æ–≤—ã—à–µ–Ω–∏–∏ –ø–µ–Ω—Å–∏–π.¬ª (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª —Ä–µ–ø—É—Ç–∞—Ü–∏—é)";
                    enemyReputation += healAmount;
                } else {
                    damage = 22 + Math.floor(Math.random() * 15);
                    enemyMessage = "–ü—É—Ç–∏–Ω: ¬´–£–∫—Ä–∞–∏–Ω–∞ ‚Äî —ç—Ç–æ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ...¬ª";
                    playerMorality -= damage;
                }
            } else if (currentEnemy === 'gays') {
                if (willHeal) {
                    healAmount = 15 + Math.floor(Math.random() * 10);
                    enemyMessage = "–ê–∫—Ç–∏–≤–∏—Å—Ç—ã: üíã (—Å—Ç—Ä–∞—Å—Ç–Ω—ã–π –ø–æ—Ü–µ–ª—É–π –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª –∏—Ö —Å–∏–ª—ã!)";
                    enemyReputation += healAmount;
                } else {
                    damage = 12 + Math.floor(Math.random() * 8);
                    enemyMessage = "–ê–∫—Ç–∏–≤–∏—Å—Ç—ã: ¬´–õ—é–±–æ–≤—å ‚Äî —ç—Ç–æ –ø—Ä–∞–≤–æ, –∞ –Ω–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏—è!¬ª";
                    playerMorality -= damage;
                }
            } else if (currentEnemy === 'uncle_sam') {
                if (willHeal) {
                    healAmount = 20 + Math.floor(Math.random() * 10);
                    enemyMessage = "–î—è–¥—è –°—ç–º: *—Ö—Ä—É–º-—Ö—Ä—É–º* –ë–∏–≥–ú–∞–∫ ‚Äî –≤–æ—Ç —á—Ç–æ –¥–∞–µ—Ç –º–Ω–µ —Å–∏–ª—ã!";
                    enemyReputation += healAmount;
                } else {
                    damage = 18 + Math.floor(Math.random() * 12);
                    enemyMessage = "–î—è–¥—è –°—ç–º: ¬´–°–≤–æ–±–æ–¥–∞, —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ, –±—Ä–∞—Ç—Å—Ç–≤–æ!¬ª";
                    playerMorality -= damage;
                }
            } else if (currentEnemy === 'satan') {
                if (willHeal) {
                    healAmount = 30 + Math.floor(Math.random() * 20);
                    enemyMessage = "–°–∞—Ç–∞–Ω–∞: *—à—à—à—à...* –û–≥–Ω–µ–Ω–Ω—ã–π –Ω–∞–ø–∞–ª–º ‚Äî –ª—É—á—à–µ–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–æ!";
                    enemyReputation += healAmount;
                } else {
                    damage = 25 + Math.floor(Math.random() * 15);
                    enemyMessage = "–°–∞—Ç–∞–Ω–∞: ¬´–°–ú–ï–†–¢–¨ –°–ú–ï–†–¢–ù–´–ú!¬ª";
                    playerMorality -= damage;
                }
            }
            
            addMessageToChat(enemyMessage, 'enemy');
            
            if (damage > 0) {
                addMessageToChat(`–ù–∞–Ω–µ—Å–µ–Ω–æ ${damage} —É—Ä–æ–Ω–∞ –≤–∞—à–µ–π –º–æ—Ä–∞–ª–∏!`, 'enemy');
                if (playerMorality <= 0) {
                    endBattle(false);
                    return;
                }
            }
            
            if (healAmount > 0) {
                addMessageToChat(`–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ ${healAmount} —Ä–µ–ø—É—Ç–∞—Ü–∏–∏ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫–∞!`, 'enemy');
                if (enemyReputation > getEnemyMaxHealth(currentEnemy)) {
                    enemyReputation = getEnemyMaxHealth(currentEnemy);
                }
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –±–∏—Ç–≤—ã
        function endBattle(playerWon) {
            battleInProgress = false;
            
            if (playerWon) {
                addMessageToChat(`–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –ø–æ–±–µ–¥–∏–ª–∏ ${getEnemyDisplayName(currentEnemy)} –≤ —Å–ª–æ–≤–µ—Å–Ω–æ–π –ø–µ—Ä–µ–ø–∞–ª–∫–µ!`, 'system');
                
                // –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–±–µ–¥—ã –Ω–∞–¥ —Ä–∞–∑–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –≤—Ä–∞–≥–æ–≤
                if (currentEnemy === 'solovev') {
                    addPatriotism(-5000); // –®—Ç—Ä–∞—Ñ!
                    addAgents(-50);
                    addMessageToChat("–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ 5000 –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º–∞ –∑–∞ –ø–æ–±–µ–¥—É –Ω–∞–¥ —Å–∏—Å—Ç–µ–º–æ–π!", 'system');
                } else if (currentEnemy === 'medvedev') {
                    addPatriotism(-50000); // –®—Ç—Ä–∞—Ñ!
                    addAgents(-200);
                    addMessageToChat("–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ 50000 –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º–∞ –∑–∞ –ø–æ–±–µ–¥—É –Ω–∞–¥ —Å–∏—Å—Ç–µ–º–æ–π!", 'system');
                } else if (currentEnemy === 'putin') {
                    addPatriotism(-500000); // –®—Ç—Ä–∞—Ñ!
                    addAgents(-500);
                    addMessageToChat("–í—ã –ø–æ—Ç–µ—Ä—è–ª–∏ 500000 –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º–∞ –∑–∞ –ø–æ–±–µ–¥—É –Ω–∞–¥ —Å–∏—Å—Ç–µ–º–æ–π!", 'system');
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–≤—É—é –∫–æ–Ω—Ü–æ–≤–∫—É
                    setTimeout(() => showEndScreen('liberation'), 3000);
                    return;
                } else if (currentEnemy === 'gays') {
                    addPatriotism(2000);
                    addMessageToChat("–í—ã –ø–æ–ª—É—á–∏–ª–∏ 2000 –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º–∞ –∑–∞ –∑–∞—â–∏—Ç—É —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã—Ö —Ü–µ–Ω–Ω–æ—Å—Ç–µ–π!", 'system');
                } else if (currentEnemy === 'uncle_sam') {
                    addPatriotism(20000);
                    addMessageToChat("–í—ã –ø–æ–ª—É—á–∏–ª–∏ 20000 –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º–∞ –∑–∞ –ø–æ–±–µ–¥—É –Ω–∞–¥ –∑–∞–ø–∞–¥–Ω—ã–º –∏–º–ø–µ—Ä–∏–∞–ª–∏–∑–º–æ–º!", 'system');
                } else if (currentEnemy === 'satan') {
                    addPatriotism(200000);
                    addMessageToChat("–í—ã –ø–æ–ª—É—á–∏–ª–∏ 200000 –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º–∞ –∑–∞ –ø–æ–±–µ–¥—É –Ω–∞–¥ —Å–∞–º–∏–º –°–∞—Ç–∞–Ω–æ–π!", 'system');
                    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Ç–æ—Ä—É—é –∫–æ–Ω—Ü–æ–≤–∫—É
                    setTimeout(() => showEndScreen('absolute_putinism'), 3000);
                    return;
                }
            } else {
                addMessageToChat(`–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏ —Å–ª–æ–≤–µ—Å–Ω—É—é –ø–µ—Ä–µ–ø–∞–ª–∫—É —Å ${getEnemyDisplayName(currentEnemy)}!`, 'system');
                addMessageToChat("–í–∞—à–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º–∞ —Å–Ω–∏–∂–µ–Ω—ã –≤–¥–≤–æ–µ!", 'system');
                addPatriotism(-Math.abs(patriotism) * 0.5);
            }
            
            // –ß–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –∫ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—É
            setTimeout(function() {
                battleScreen.style.display = 'none';
                document.getElementById('calculator').style.display = 'block';
                battleChat.innerHTML = '';
                // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±–æ–µ–≤—É—é –º—É–∑—ã–∫—É –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º –≥–∏–º–Ω
                battleMusic.pause();
                anthem.currentTime = 0;
                anthem.play();
            }, 3000);
        }

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ —ç–∫—Ä–∞–Ω–∞ –∫–æ–Ω—Ü–æ–≤–∫–∏
        function showEndScreen(endType) {
            battleScreen.style.display = 'none';
            endScreen.style.display = 'flex';
            
            if (endType === 'liberation') {
                endTitle.textContent = "–ö–û–ù–ï–¶ 1: –û–°–í–û–ë–û–ñ–î–ï–ù–ò–ï –†–û–°–°–ò–ò";
                endText.innerHTML = "–í—ã –ø–æ–±–µ–¥–∏–ª–∏ —Å–∏—Å—Ç–µ–º—É –ø—Ä–æ–ø–∞–≥–∞–Ω–¥—ã. –ù–∞—Å—Ç—É–ø–∏–ª–∞ —ç–ø–æ—Ö–∞ —Å–≤–æ–±–æ–¥—ã, –¥–µ–º–æ–∫—Ä–∞—Ç–∏–∏ –∏ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–π –≤–ª–∞—Å—Ç–∏. –†–æ—Å—Å–∏—è –≤—Å—Ç–∞–ª–∞ –Ω–∞ –ø—É—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è. –ö–æ–Ω–µ—Ü? –ò–ª–∏ –Ω–æ–≤–æ–µ –Ω–∞—á–∞–ª–æ...";
            } else if (endType === 'absolute_putinism') {
                endTitle.textContent = "–ö–û–ù–ï–¶ 2: –í–û–°–•–û–î –ê–ë–°–û–õ–Æ–¢–ù–û–ì–û –ü–£–¢–ò–ù–ò–ó–ú–ê";
                endText.innerHTML = "–í—ã —É–Ω–∏—á—Ç–æ–∂–∏–ª–∏ –≤—Å–µ—Ö –≤—Ä–∞–≥–æ–≤ ‚Äî –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –∏ –≤–Ω–µ—à–Ω–∏—Ö, —Ä–µ–∞–ª—å–Ω—ã—Ö –∏ –≤–æ–æ–±—Ä–∞–∂–∞–µ–º—ã—Ö. –í–∞—à –ø–∞—Ç—Ä–∏–æ—Ç–∏–∑–º –¥–æ—Å—Ç–∏–≥ –∞–±—Å–æ–ª—é—Ç–Ω–æ–π –≤–µ–ª–∏—á–∏–Ω—ã. –í–ª–∞–¥–∏–º–∏—Ä –í–ª–∞–¥–∏–º–∏—Ä–æ–≤–∏—á –ü—É—Ç–∏–Ω –≤–æ–∑–≤—ã—à–∞–µ—Ç—Å—è –Ω–∞–¥ –Ω–∞—Ü–∏–µ–π, –∫–∞–∫ –Ω–æ–≤—ã–π –°—Ç–∞–ª–∏–Ω ‚Äî –æ—Ç–µ—Ü, –≤–æ–∂–¥—å –∏ —Å—É–¥—å—è. –≠–ø–æ—Ö–∞ —Å–æ–º–Ω–µ–Ω–∏–π –æ–∫–æ–Ω—á–µ–Ω–∞. –ù–∞—Å—Ç—É–ø–∏–ª–∞ –≠—Ä–∞ –í–µ–ª–∏–∫–æ–≥–æ –ü—É—Ç–∏–Ω–∞.";
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ"
        endButton.onclick = function() {
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
            patriotism = 0;
            agents = 0;
            extremism = 0;
            loyalty = 50;
            svoSupport = 0;
            money = 0;
            dollars = 0;
            deposit = 0;
            credit = 0;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            updateStats();
            
            // –°–∫—Ä—ã–≤–∞–µ–º —ç–∫—Ä–∞–Ω –∫–æ–Ω—Ü–æ–≤–∫–∏ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä
            endScreen.style.display = 'none';
            document.getElementById('calculator').style.display = 'block';
            
            // –í–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º –≥–∏–º–Ω
            anthem.currentTime = 0;
            anthem.play();
        };

        // –ù–∞—á–∏–Ω–∞–µ–º –ø–µ—Ä–≤–æ–µ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ 15 —Å–µ–∫—É–Ω–¥
        setTimeout(showVoteModal, 15000);

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
        updateStats();

        // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –ø–æ body –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∞—É–¥–∏–æ
        document.body.addEventListener('click', function() {
            if (anthem.paused) {
                anthem.play();
            }
        }, { once: true });

        // –î–æ–±–∞–≤–ª—è–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–∫—Ä—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –§–°–ë –∫–ª–∏–∫–æ–º
        fsbMessage.addEventListener('click', function() {
            fsbMessage.style.display = 'none';
        });
    </script>
</body>
      </html>
